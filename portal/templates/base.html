{% load static %}
<!DOCTYPE html>
<html lang="pt-br" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Portal Inovaí{% endblock %}</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Ícones do Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <!-- Google Fonts: Outfit -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&display=swap" rel="stylesheet">

    {% block tailwind_config %}
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        display: ['Outfit', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            blue: '#0d6efd',
                            dark: '#0a58ca',
                        },
                        mulheres: {
                            purple: '#6a0080', // Roxo mais escuro (Texto)
                            primary: '#8803A3', // Roxo marca (Botões, Destaques)
                            pink: '#F2B9FE',
                            dark: '#2e0836', // Fundo escuro
                            light: '#ffffff', // Fundo claro (alias)
                        }
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.8s ease-out',
                        'fade-in': 'fadeIn 1s ease-out',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    {% endblock %}

    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            }
        }
        /* Barra de Rolagem Personalizada Padrão */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #888; 
            border-radius: 5px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555; 
        }
        .dark ::-webkit-scrollbar-track {
            background: #2d3748; 
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #4a5568; 
        }
        
        {% block extra_styles %}{% endblock %}
    </style>
</head>

<body
    class="{% block body_class %}bg-slate-50 text-gray-800 dark:bg-gray-900 dark:text-gray-100 transition-colors duration-300 font-sans flex flex-col min-h-screen{% endblock %}">

    {% block navbar %}
    {% include 'components/navbar.html' %}
    {% endblock %}

    {% block content %}{% endblock %}

    {% block footer %}
    {% include 'components/footer.html' %}
    {% endblock %}

    <!-- Scripts para Interatividade -->
    {% block scripts %}
    <script>
        // --- Lógica do Modo Escuro ---
        const darkModeBtn = document.getElementById('darkModeBtn');
        const darkModeMobileBtn = document.getElementById('darkModeMobileBtn');
        const html = document.documentElement;

        function toggleDarkMode() {
            html.classList.toggle('dark');
            updateIcons();
        }

        function updateIcons() {
            const isDark = html.classList.contains('dark');
            const iconClass = isDark ? 'bi-sun-fill' : 'bi-moon-fill';

            // Atualizar Ícone Desktop
            if (darkModeBtn) {
                const icon = darkModeBtn.querySelector('i');
                icon.className = `bi ${iconClass}`;
                darkModeBtn.title = isDark ? "Modo Claro" : "Modo Escuro";
            }

            // Atualizar Ícone Móvel
            if (darkModeMobileBtn) {
                const icon = darkModeMobileBtn.querySelector('i');
                icon.className = `bi ${iconClass}`;
            }
        }

        if (darkModeBtn) darkModeBtn.addEventListener('click', toggleDarkMode);
        if (darkModeMobileBtn) darkModeMobileBtn.addEventListener('click', toggleDarkMode);

        // --- Lógica do Menu Móvel ---
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mobileMenu = document.getElementById('mobileMenu');

        if (mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
        }

        // --- Lógica do Carrossel (JS Puro - Genérico) ---
        // Verifica se existe o wrapper do carrossel antes de executar
        const carouselWrapper = document.getElementById('carouselWrapper');
        if (carouselWrapper) {
            const slides = carouselWrapper.children;
            const totalSlides = slides.length;
            let currentSlide = 0;
            let autoSlideInterval;

            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const indicators = document.querySelectorAll('.indicator');

            function updateCarousel() {
                const offset = currentSlide * -100;
                carouselWrapper.style.transform = `translateX(${offset}%)`;

                // Atualizar indicadores
                indicators.forEach((ind, index) => {
                    if (index === currentSlide) {
                        ind.style.opacity = '1';
                        ind.classList.add('w-6'); // Esticar indicador ativo
                    } else {
                        ind.style.opacity = '0.5';
                        ind.classList.remove('w-6');
                    }
                });
            }

            function nextSlide() {
                currentSlide = (currentSlide + 1) % totalSlides;
                updateCarousel();
            }

            function prevSlide() {
                currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
                updateCarousel();
            }

            if (prevBtn) prevBtn.addEventListener('click', () => {
                prevSlide();
                resetAutoSlide();
            });

            if (nextBtn) nextBtn.addEventListener('click', () => {
                nextSlide();
                resetAutoSlide();
            });

            indicators.forEach((ind, index) => {
                ind.addEventListener('click', () => {
                    currentSlide = index;
                    updateCarousel();
                    resetAutoSlide();
                });
            });

            function resetAutoSlide() {
                clearInterval(autoSlideInterval);
                autoSlideInterval = setInterval(nextSlide, 5000);
            }

            // Iniciar Slide Automático
            resetAutoSlide();
        }

        // --- Lógica de Rolagem da Navbar ---
        const navbar = document.getElementById('navbar');
        // A lógica específica de rolagem será injetada pelos templates filhos
        // pois depende das cores e IDs específicos de cada tema.

        {% block navbar_scroll_logic %}
        // Lógica padrão se não for sobrescrita (opcional)
        {% endblock %}

    </script>
    {% endblock %}
</body>

</html>