{% extends 'base.html' %}

{% block title %}Entrar | Portal Inovaí{% endblock %}

{% block navbar_scroll_logic %}
// Login page: navbar solid (no hero), same as index scrolled state
const navLinks = navbar ? navbar.querySelectorAll('div.hidden.md\\:flex > a') : [];
const logoImgs = navbar ? navbar.querySelectorAll('.flex-shrink-0 img') : [];
if (navbar) {
    navbar.classList.remove('bg-transparent', 'text-white', 'border-white/20');
    navbar.classList.add('bg-white', 'dark:bg-gray-800', 'shadow-md');
    logoImgs.forEach(img => img.style.filter = 'none');
    if (typeof darkModeBtn !== 'undefined' && darkModeBtn) {
        darkModeBtn.classList.remove('text-white', 'border-white/20');
        darkModeBtn.classList.add('text-gray-600', 'dark:text-gray-300', 'border-gray-300', 'dark:border-gray-600');
    }
    navLinks.forEach(link => {
        link.classList.remove('text-white');
        link.classList.add('text-gray-600', 'dark:text-gray-300');
    });
}
{% endblock %}

{% block content %}
<main class="flex-grow flex items-center justify-center px-4 py-16 min-h-[calc(100vh-8rem)]">
    <div class="w-full max-w-md">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden">
            <div class="px-8 pt-8 pb-2">
                <h1 class="text-2xl font-bold text-gray-800 dark:text-white mb-1">Entrar</h1>
                <p class="text-sm text-gray-600 dark:text-gray-300 mb-6">Use suas credenciais para acessar o Portal Inovaí.</p>

                {% if form.non_field_errors %}
                <div class="mb-4 p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 text-sm">
                    {% for error in form.non_field_errors %}{{ error }}{% endfor %}
                </div>
                {% endif %}

                <form method="post" action="{% url 'portal:login' %}" class="space-y-5">
                    {% csrf_token %}
                    {% if next %}<input type="hidden" name="next" value="{{ next }}">{% endif %}

                    <div>
                        <label for="id_username" class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Usuário</label>
                        <div class="relative">
                            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500">
                                <i class="bi bi-person"></i>
                            </span>
                            <input type="text" name="username" id="id_username" value="{{ form.username.value|default:'' }}"
                                autofocus autocomplete="username" required
                                class="w-full pl-10 pr-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 placeholder-gray-400 focus:ring-2 focus:ring-brand-blue focus:border-brand-blue dark:focus:ring-brand-blue dark:focus:border-brand-blue transition">
                        </div>
                        {% if form.username.errors %}
                        <p class="mt-1 text-sm text-red-600 dark:text-red-400">{{ form.username.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <div>
                        <label for="id_password" class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Senha</label>
                        <div class="relative">
                            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500">
                                <i class="bi bi-lock"></i>
                            </span>
                            <input type="password" name="password" id="id_password" autocomplete="current-password" required
                                class="w-full pl-10 pr-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 placeholder-gray-400 focus:ring-2 focus:ring-brand-blue focus:border-brand-blue dark:focus:ring-brand-blue dark:focus:border-brand-blue transition">
                        </div>
                        {% if form.password.errors %}
                        <p class="mt-1 text-sm text-red-600 dark:text-red-400">{{ form.password.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <button type="submit"
                        class="w-full bg-brand-blue hover:bg-brand-dark text-white font-bold py-3 px-6 rounded-full transition shadow-lg hover:shadow-brand-blue/50 flex items-center justify-center gap-2">
                        <i class="bi bi-box-arrow-in-right"></i> Entrar
                    </button>
                </form>
            </div>
            <div class="px-8 pb-8 pt-2">
                <a href="{% url 'portal:index' %}"
                    class="text-sm text-gray-600 dark:text-gray-400 hover:text-brand-blue dark:hover:text-blue-400 transition">← Voltar ao início</a>
            </div>
        </div>
    </div>
</main>
{% endblock %}
